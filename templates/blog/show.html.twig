{# blog/show.html.twig #}
{% extends 'base.html.twig' %}

{% block title %}
	{{ post.title }}
	- Entr'Aide 2.0
{% endblock %}

{% block body %}
	<div class="container mt-5">
		<article class="blog-post">
			<div class="d-flex justify-content-between align-items-center mb-3">
				<h1>{{ post.title }}</h1>
				<div>
					{% if is_granted('EDIT', post) %}
						<a href="{{ path('app_blog_edit', {'slug': post.slug}) }}" class="btn btn-warning me-2">
							<i class="bi bi-pencil"></i>
							Modifier
						</a>
					{% endif %}
					{% if is_granted('DELETE', post) %}
						<form method="post" action="{{ path('app_blog_delete', {'slug': post.slug}) }}" class="d-inline" onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet article ?');">
							<input type="hidden" name="_token" value="{{ csrf_token('delete' ~ post.id) }}">
							<button class="btn btn-danger">
								<i class="bi bi-trash"></i>
								Supprimer
							</button>
						</form>
					{% endif %}
				</div>
			</div>

			<div class="meta mb-4 text-muted small">
				Publié par
				{{ post.author.pseudo }}
				le
				{{ post.createdAt|date('d/m/Y à H:i') }}
				{% if post.updatedAt != post.createdAt %}
					(modifié le
					{{ post.updatedAt|date('d/m/Y à H:i') }})
				{% endif %}
			</div>

			<div class="content mb-4">
				{{ post.content|nl2br }}
			</div>
		</article>

		<a href="{{ path('app_blog_index') }}" class="btn btn-outline-secondary">
			<i class="bi bi-arrow-left"></i>
			Retour
		</a>
	</div>
{% endblock %}
